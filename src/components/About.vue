<template>
	<div 
    data-scroll-container
    class="about">
		<section 
      data-scroll
      class="about_in">

      <div 
        class="title_float_container"
        data-scroll
        data-scroll-speed="3">
        <h2 
          class="title_float" 
          id="bookshop">
          <span>
            <a href="">
              Publications  <i>&#129125;</i>
            </a>
          </span>
        </h2>
      </div>

      <div 
        class="title_float_container"
        data-scroll
        data-scroll-speed="3">
        <h2 
          class="title_float" 
          id="publications">
          <span>
            <a href="">
              Publications  <i>&#129125;</i>
            </a>
          </span>
        </h2>
      </div>

      <div class="text">
        <h2 class="title"><span class="trnslt">Biography</span></h2>
          <div class="sp mrgn">
            I am a French-Armenian photographer and filmmaker based in Paris, with a degree in graphic design (2012). I take an approach in social documentary, focusing on communities living on the margins of society. From Armenia to the United States, and more recently in Siberia, notions of humanity, identity and society are central to my work.
          </div>    
          <div class="sp mrgn">
            I have participated in international exhibitions in Los Angeles, Bratislava, Paris, Lyon, Kuala Lumpur, Melbourne, Vancouver and Zurich – and have been a finalist in competitions: Fondation Lagardère, Paris Match Emerging Talent Awards, Life Framer, Foto filmic, Lucie Foundation, Off Festival of Bratislava, and won the HiP Award in 2020 for my book Sacha. My work has been published in the Washington Post, The Guardian, National Geographic, Der Spiegel, Vanity Fair, Télérama, Grazia, Vogue, NZZ and Libération.
          </div>    
              
          <div class="sp mrgn">
            In 2018, I published my first book Faubourg Treme with André Frère Éditions, focusing on my long-term photographic project in New Orleans. This book is now sold in New York, England and France. In the same year, I made an international TV commercial for Action Against Hunger and my first short film Minor was a finalist at the Nikon Film Festival.
          </div>    
              
          <div class="sp mrgn">
            In 2020, I published my new book Sacha with André Frère Editions, which bears witness to climate change through the daily life of a reindeer herder in Yakutia. This book is available in France, England and the United States. In December 2020, my new documentary film on Nagorno-Karabakh was broadcast on the French public service channel Arte and I am preparing a new book and a feature documentary on the same subject.    
          </div>
      </div>

      <div class="text" id="awards">
        <h2 class="title"><span class="trnslt">Awards</span></h2>
        <div class="sp">
            2021 &nbsp; &mdash; &nbsp; Les Boutographie, Projection, France
        </div>
        <div class="sp">
            2020 &nbsp; &mdash; &nbsp; Prix HIP, Culture et voyage, Winner, France
        </div>
        <div class="sp">
            2020 &nbsp; &mdash; &nbsp; Prix Mentor, Finalist, France
        </div>
        <div class="sp">
            2020 &nbsp; &mdash; &nbsp; Fondation Largardère, Finalist, France
        </div>
        <div class="sp">
            2020 &nbsp; &mdash; &nbsp; Prix Maison Blanche, Finalist, France
        </div>
        <div class="sp">
            2020 &nbsp; &mdash; &nbsp; Mentor, Freelens / SCAM Session #2, Finalist, France
        </div>
        <div class="sp">
            2018 &nbsp; &mdash; &nbsp; Life Framer, Judge by Steve McCurry, Honorary mention, USA
        </div>
        <div class="sp">
            2017 &nbsp; &mdash; &nbsp; Off Festival of Bratislava, Finalist, Bratislava
        </div>
        <div class="sp">
            2017 &nbsp; &mdash; &nbsp; Lucie Fondation, Analogue Portrait, Finalist, Los Angeles
        </div>
        <div class="sp">
            2016 &nbsp; &mdash; &nbsp; Foto filmic, Honorable Mention, USA
        </div>
        <div class="sp">
            2016 &nbsp; &mdash; &nbsp; Mentor, Freelens / SCAM Session #1, Finalist, France 
        </div>
        <div class="sp">
            2016 &nbsp; &mdash; &nbsp; Kuala Lumpur international Photo Award, Finalist, Malaisia
        </div>
        <div class="sp">
            2016 &nbsp; &mdash; &nbsp; Life Framer, Finalist, USA
        </div>
        <div class="sp">
            2012 &nbsp; &mdash; &nbsp; Paris Match, Concours Photographe Etudiant, Finalist, Paris
        </div>
      </div>

      <div class="text">
        <h2 class="title"><span class="trnslt">Exhibitions</span></h2>
        <div class="sp mrgn">
            « Faubourg Treme », André Frère Editions, published in November 2017
        </div>
        <div class="sp mrgn">
            « Sacha », André Frère Editions, published in February 2020
        </div>
        <div class="sp">  
            2021 &nbsp; &mdash; &nbsp; Rencontres photographiques du 10e, Group Show, France
        </div>
        <div class="sp">  
            2021 &nbsp; &mdash; &nbsp; Vivants, Exhibition, Circulation & Ambassady of France, Erevan, Arménie
        </div>
        <div class="sp">  
            2020 &nbsp; &mdash; &nbsp; Galerie Just Jaeckin, Personnal Show, Paris
        </div>
        <div class="sp">  
            2019 &nbsp; &mdash; &nbsp; Centre Culturel Joseph Kessel,Personnal Show, Villepinte
        </div>
        <div class="sp">  
            2018 &nbsp; &mdash; &nbsp; In frame Gallery, Group Show, Arles
        </div>
        <div class="sp">  
            2018 &nbsp; &mdash; &nbsp; Book Signing, Cosmos Arles Books, Arles
        </div>
        <div class="sp">  
            2018 &nbsp; &mdash; &nbsp; Book Signing, André frère Éditions, Paris Photo
        </div>
        <div class="sp">  
            2018 &nbsp; &mdash; &nbsp; What’s Up Photo doc / In frame, Group Show, Paris
        </div>
        <div class="sp">  
            2018 &nbsp; &mdash; &nbsp; Art en transe Gallery, Personnal Show, Paris
        </div>
        <div class="sp">  
            2018 &nbsp; &mdash; &nbsp; Photography On A Postcard, Photo London, UK
        </div>
        <div class="sp">  
            2018 &nbsp; &mdash; &nbsp; Off Festival of Bratislava, Finalist, Group Show, Bratilava
        </div>
        <div class="sp">  
            2017 &nbsp; &mdash; &nbsp; Book Signing, L’Espace Beaurepaire, Paris
        </div>
        <div class="sp">  
            2017 &nbsp; &mdash; &nbsp; Aesthesia Studio, Group Show, Month of photography, Los Angeles
        </div>
        <div class="sp">  
            2017 &nbsp; &mdash; &nbsp; White BoxGalerie, Group Show, Kuala Lumpur
        </div>
        <div class="sp">  
            2017 &nbsp; &mdash; &nbsp; DNJ Gallery, Group Show, Los Angeles
        </div>
        <div class="sp">  
            2017 &nbsp; &mdash; &nbsp; DNJ Gallery, Group Show, Melbourne and Vancouver
        </div>
        <div class="sp">  
            2017 &nbsp; &mdash; &nbsp; Trans Magazin HCP Eingang, Group Show, Zurich
        </div>
        <div class="sp">  
            2016 &nbsp; &mdash; &nbsp; Innert Art, Salon d’art contemporain, Group Show, Paris
        </div>
        <div class="sp">  
            2014 &nbsp; &mdash; &nbsp; Art Tripping, Village des Créateurs, Group Show, Lyon
        </div>
        <div class="sp">  
            2012 &nbsp; &mdash; &nbsp; Plan B la galerie, 51 rue de Seine 75006, Personal Show, Paris      
        </div>
      </div>

      <div class="text">
        <h2 class="title"><span class="trnslt">Online</span></h2>
        <div class="sp">
          Spiegel, Arte, Télérama, Prix HIP, The Washington Post, France Inter, Libération, Polka, The Guardian, Internazionale, Fisheye magazine, Vogue, National Geographic Italia, France Inter, British Jounal of Photography, NZZ, National Géographic ( Italie ), Libération, Vogue, Etape Magazine, Der Spiegel, Vanity Fair, Grazia, GQ, Konbini, Télérama, Marie-Claire, France-Amérique, Fisheye (France), L’oeil de la photographie (France), Paris Match (France), TSF jazz (France), Esquire Russie, Lensculture (USA), 6mois (France), Yard (France), Konbini (France, Mexique, Angleterre), Vice (France), Aint-Bad (USA), Fubiz (France), Epic Magazine (Print, France), Trans Magazine (Print, Suisse), Brasil 247, Hypeness (Brésil), Totallycoolpics (USA), The Independent Photographer, Zeutch (France), Beware (France), Houhouhaha (France), Photographie.com, Apartv (France), The others (France), The Travel Photographer (France), Yard (France), AA13 (USA), HotnGoldMag (India), Hypebeast (USA), Fotofilmic (USA), Street Tease (France), Orms (France), Huhmagazine (UK), Open Minded (USA), Zeutch (France), Packshotmag (France), MyModermet (USA)
        </div>
      </div>

      <div class="text">
        <h2 class="title"><span class="trnslt">Contact</span></h2>
        <div class="sp mrgn">
          Phone &nbsp; &mdash; &nbsp; 0033 (0)6 63 24 83 73  
        </div>
        <div class="no_sp mrgn">
          <div class="line">
            <div class="line_in trnslt">  
              Mail &nbsp; &mdash; &nbsp; apazoumian@gmail.com
            </div>
          </div>
        </div>
        <div class="no_sp mrgn">
          <div class="line">
            <div class="line_in trnslt">  
              <a href="">
                Instagram  <i>&#129125;</i>
              </a>
            </div>
          </div>
        </div>
        <div class="no_sp mrgn">
          <div class="line">
            <div class="line_in trnslt">  
              <a href=""> 
                Vimeo  <i>&#129125;</i>
              </a>
            </div>
          </div>
        </div>
        <div class="no_sp mrgn">
          <div class="line">
            <div class="line_in trnslt">  
              <a href="#">
                Facebook  <i>&#129125;</i>
              </a>
            </div>
          </div>
        </div>
      </div>

		</section>
	</div>
</template>

<script setup>
import { onBeforeUnmount, onMounted, watch } from 'vue';
import LocomotiveScroll from 'locomotive-scroll';
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { storeToRefs } from 'pinia';
import { useStatesStore } from '@/store/states';
//eslint-disable-next-line
const statesStore = useStatesStore();
gsap.registerPlugin(ScrollTrigger);

var scroll;

onMounted(() => {

  document.getElementById("bookshop").parentElement.style.height = document.getElementById("bookshop").offsetWidth + "px";
  document.getElementById("publications").parentElement.style.height = document.getElementById("publications").offsetWidth + "px";
  
  scroll = new LocomotiveScroll({
    el: document.querySelector('.about'),
    smooth: true,
  });

  const sp = document.querySelectorAll('.sp');

  for (let i = 0; i < sp.length; i++){
  splitLines(sp[i], '<div class="line"><div class="line_in trnslt">','</div></div>')
  }

  // each time Locomotive Scroll updates, tell ScrollTrigger to update too (sync positioning)
  scroll.on("scroll", ScrollTrigger.update);

  // tell ScrollTrigger to use these proxy methods for the ".about" element since Locomotive Scroll is hijacking things
  ScrollTrigger.scrollerProxy(".about", {
    scrollTop(value) {
      return arguments.length ? scroll.scrollTo(value, {duration: 0, disableLerp: true}) : scroll.scroll.instance.scroll.y;
    }, // we don't have to define a scrollLeft because we're only scrolling vertically.
    getBoundingClientRect() {
      return {top: 0, left: 0, width: window.innerWidth, height: window.innerHeight};
    },
    // LocomotiveScroll handles things completely differently on mobile devices - it doesn't even transform the container at all! So to get the correct behavior and avoid jitters, we should pin things with position: fixed on mobile. We sense it by checking to see if there's a transform applied to the container (the LocomotiveScroll-controlled element).
      pinType: document.querySelector(".about").style.transform ? "transform" : "fixed"
    });

    // each time the window updates, we should refresh ScrollTrigger and then update LocomotiveScroll. 
    ScrollTrigger.addEventListener("refresh", () => scroll.update());
    ScrollTrigger.defaults({ scroller: ".about" });


ScrollTrigger.addEventListener("scrollStart", () => ScrollTrigger.refresh());
ScrollTrigger.refresh();

	// window.addEventListener('resize', function() {
	// 	scroll.update();
  //   ScrollTrigger.killAll();
	// }, true);

});

// onBeforeUnmount(() => {
//     ScrollTrigger.killAll();
//     scroll.destroy();
//     gsap.to('.line_in', {translateY: 100 + "%"});
//     gsap.to('.about .title span, .about .title_float span', {translateY: -100 + "%"});

// });

const { about } = storeToRefs(statesStore);

watch(about, () => {
  if (statesStore.about) {

    setTimeout(() => {

      gsap.to('.about', {autoAlpha: 1, duration: 1});

      var start = "top bottom";
      ScrollTrigger.batch(".trnslt", {
        // interval: 0.1, // time window (in seconds) for batching to occur. 
        once: true,
        start: () => start,
        onEnter: batch => gsap.to(batch, {translateY: 0 + "%", stagger: 0.075}),
        onRefresh: isActive => {
        start = "top bottom-=50px";
        }
      });

      ScrollTrigger.batch(".title_float > span", { 
        once: true,
        start : "top bottom-=100px",
        onEnter: batch => gsap.to(batch, {translateY: 0 + "%", stagger: 0.075}),
      });

      setTimeout(() => {
        ScrollTrigger.refresh();
      }, "1000")

    }, "500")
  }

  else if (statesStore.about === false) {

    gsap.to('.about', {autoAlpha: 0, duration: 0.5});

    setTimeout(() => {
      ScrollTrigger.killAll();
      scroll.init();
      gsap.to('.line_in', {translateY: 100 + "%"});
      gsap.to('.about .title span, .about .title_float span', {translateY: -100 + "%"});
    }, "500")
  }

});


function splitLines(container, opentag, closingtag) {

  var spans = container.children, top = 0, tmp = '';
  container.innerHTML = container.textContent.replace(/\S+/g, '<n>$&</n>');  

  for (let i = 0; i < spans.length; i++) {

    var rect = spans[i].getBoundingClientRect().top;
    if (top < rect) tmp += closingtag + opentag;
    top = rect;
    tmp += spans[i].textContent + ' ';

  }
  
container.innerHTML = tmp += closingtag;
}
</script>

<style scoped>
.about {
  visibility: hidden; 
  background: #000;
  z-index: 4;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  min-height: 100vh;
}

.about_in {
  padding-top: 30vh;
  left: 0;
  position: relative;
  width: 100%;
  min-height: 100vh;
}

.about .text {
  width: 40vw;
  margin-left: 30vw;
  position: relative;
  padding-bottom: 20vh
}

.about .title {
  position: absolute;
  transform: rotate(-90deg);
  right: 100%;
  transform-origin: top right;
  margin-right: 100px;
  font-size: 3em;
  overflow: hidden;
}

.about .title_float_container {
  position: absolute;
  top: 300vh;
  right: 20vw;
}

.about .title_float_container:first-of-type {
  position: absolute;
  top: 150vh;
  right: 20vw;
}

.about .title_float {
  transform: rotate(-90deg);
  transform-origin: top right;
  font-size: 3em;
  overflow: hidden;
  padding-right: 5px;
}

/* .about .title_float_container .title_float {
    transform: rotate(0deg);
} */

.about .title span, .about .title_float span {
  transform: translateY(-100%);
  display: inline-block;
  padding-bottom: 10px;
}

.about .sp, .about .no_sp {
  font-weight: 300;
  font-size: 1.5em;
  line-height: 1.5em;
  width: 100%;
}

.sp.mrgn, .no_sp.mrgn {
  margin-bottom: 50px;
}

::v-deep .line, .line {
  overflow: hidden;
}

::v-deep .line_in, .line_in {
  transform: translateY(100%);
}

.no_sp a i, .title_float a i {
  transition: all 0.2s linear;
  display: inline-block;
}

.no_sp a:hover i, .title_float a:hover i {
  transform: translateX(5px);
}

</style>